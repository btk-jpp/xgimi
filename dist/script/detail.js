"use strict";!function(g){g(document).ready(function(){g("header").load("header.html"),g("footer").load("footer.html");var i=location.search.substring(1).split("=")[1],s=g("#smallpic"),e=g("#bpic"),l=g(".loadtitle"),c=g(".loadpcp"),a=g(".p-name p"),i=i||1;g.ajax({url:"http://localhost/xgimi/php/getsid.php",data:{sid:i},dataType:"json"}).done(function(i){s.attr("src",i.url),s.attr("sid",i.sid),e.attr("src",i.url),l.html(i.title),c.html(i.price),a.html(i.depict),console.log(i.piclisturl.split(","));var t=i.piclisturl.split(","),o="";g.each(t,function(i,t){o+='<li><img src="'+t+'"/>></li>'}),g("#list ul").html(o)});var h=g("#spic"),n=g("#sf"),t=g("#bf"),o=g("#left"),r=g("#right");g("#list");n.width(h.width()*t.width()/e.width()),n.height(h.height()*t.height()/e.height());var d=e.width()/h.width();h.hover(function(){n.css("visibility","visible"),t.css("visibility","visible"),g(this).on("mousemove",function(i){var t=i.pageX-g(".goodsinfo").offset().left-n.width()/2,o=i.pageY-g(".goodsinfo").offset().top-n.height()/2;t<0?t=0:t>=h.width()-n.width()&&(t=h.width()-n.width()),o<0?o=0:o>=h.height()-n.height()&&(o=h.height()-n.height()),n.css({left:t,top:o}),e.css({left:-t*d,top:-o*d})})},function(){n.css("visibility","hidden"),t.css("visibility","hidden")}),g("#list ul").on("click","li",function(){var i=g(this).find("img").attr("src");s.attr("src",i),e.attr("src",i)});var p=3;r.on("click",function(){var i=g("#list ul li");i.size()>p&&(p++,g("#list ul").animate({left:-(p-3)*i.eq(0).outerWidth(!0)}))}),o.on("click",function(){var i=g("#list ul li");3<p&&(p--,g("#list ul").animate({left:-(p-3)*i.eq(0).outerWidth(!0)}))});var u=[],f=[];g(".p-btn a").on("click",function(){var i,t=g(this).parents(".goodsinfo").find("#smallpic").attr("sid");f=g.cookie("cookiesid")&&g.cookie("cookienum")?(u=g.cookie("cookiesid").split(","),g.cookie("cookienum").split(",")):(u=[],[]),-1!=g.inArray(t,u)?(i=parseInt(f[g.inArray(t,u)])+parseInt(g("#count").val()),f[g.inArray(t,u)]=i):(u.push(t),g.cookie("cookiesid",u,{expires:10,path:"/"}),f.push(g("#count").val())),g.cookie("cookienum",f,{expires:10,path:"/"}),alert("按钮触发了")})})}(jQuery);